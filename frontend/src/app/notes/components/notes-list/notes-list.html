<!-- Empty State -->
@if (!hasNotes()) {
<div class="flex flex-col items-center justify-center py-20">
  <!-- Icon -->
  <div class="mb-6 text-muted-foreground/50">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="80"
      height="80"
      viewBox="0 0 24 24"
    >
      <path
        fill="currentColor"
        d="M10.995 4.68v3.88A2.44 2.44 0 0 1 8.545 11h-3.86a2.38 2.38 0 0 1-1.72-.72a2.4 2.4 0 0 1-.71-1.72V4.69a2.44 2.44 0 0 1 2.43-2.44h3.87a2.42 2.42 0 0 1 1.72.72a2.4 2.4 0 0 1 .72 1.71m10.75.01v3.87a2.46 2.46 0 0 1-2.43 2.44h-3.88a2.5 2.5 0 0 1-1.73-.71a2.44 2.44 0 0 1-.71-1.73V4.69a2.4 2.4 0 0 1 .72-1.72a2.42 2.42 0 0 1 1.72-.72h3.87a2.46 2.46 0 0 1 2.44 2.44m0 10.75v3.87a2.46 2.46 0 0 1-2.43 2.44h-3.88a2.5 2.5 0 0 1-1.75-.69a2.42 2.42 0 0 1-.71-1.73v-3.87a2.4 2.4 0 0 1 .72-1.72a2.42 2.42 0 0 1 1.72-.72h3.87a2.46 2.46 0 0 1 2.44 2.44zm-10.75.01v3.87a2.46 2.46 0 0 1-2.45 2.43h-3.86a2.42 2.42 0 0 1-2.43-2.43v-3.87A2.46 2.46 0 0 1 4.685 13h3.87a2.5 2.5 0 0 1 1.73.72a2.45 2.45 0 0 1 .71 1.73"
      />
    </svg>
  </div>

  <!-- Texto dinámico según el contexto -->
  @if (totalNotes() === 0) {
  <!-- No tiene ninguna nota creada -->
  <h3 class="text-xl font-semibold text-foreground mb-2">No notes yet</h3>
  <p class="text-muted-foreground text-sm mb-6">
    Start by creating your first note
  </p>

  <!-- Button -->
  <button
    (click)="onCreateNote()"
    class="inline-flex items-center gap-2 rounded-lg bg-primary text-white px-5 py-2.5 text-sm font-semibold cursor-pointer hover:bg-primary/90 hover:scale-105 hover:shadow-lg active:scale-95 transition-all duration-300 ease-in-out"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="16"
      height="16"
      viewBox="0 0 24 24"
    >
      <g fill="none">
        <path
          d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"
        />
        <path
          fill="currentColor"
          d="M10.5 20a1.5 1.5 0 0 0 3 0v-6.5H20a1.5 1.5 0 0 0 0-3h-6.5V4a1.5 1.5 0 0 0-3 0v6.5H4a1.5 1.5 0 0 0 0 3h6.5z"
        />
      </g>
    </svg>
    <span>Create First Note</span>
  </button>
  } @else if (currentStatus() === 'active') {
  <!-- Tiene notas pero no activas -->
  <h3 class="text-xl font-semibold text-foreground mb-2">No active notes</h3>
  <p class="text-muted-foreground text-sm mb-6">
    Check your archived notes or create a new one
  </p>
  } @else {
  <!-- Tiene notas pero no archivadas -->
  <h3 class="text-xl font-semibold text-foreground mb-2">No archived notes</h3>
  <p class="text-muted-foreground text-sm mb-6">
    All your notes are currently active
  </p>
  }
</div>
} @else {
<!-- Notes Grid -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  @for (note of notes(); track note.id) {
  <div
    (click)="logNote(note)"
    class="relative bg-card/60 border border-border/40 rounded-lg p-5 hover:shadow-lg hover:shadow-purple-500/30 hover:scale-[1.02] transition-all duration-300 ease-in-out cursor-pointer group"
  >
    <!-- Action Buttons - Top Right -->
    <div
      class="absolute top-3 right-3 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200"
    >
      <!-- Edit Button -->
      <button
        (click)="onEditNote(note)"
        class="p-2 rounded-full text-muted-foreground hover:bg-purple-500 hover:text-white transition-all duration-200 cursor-pointer"
        aria-label="Edit note"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
        >
          <g
            fill="none"
            stroke="currentColor"
            stroke-linejoin="round"
            stroke-width="2"
          >
            <path
              d="m16.425 4.605l.99-.99a2.1 2.1 0 0 1 2.97 2.97l-.99.99m-2.97-2.97l-6.66 6.66a3.96 3.96 0 0 0-1.041 1.84L8 16l2.896-.724a3.96 3.96 0 0 0 1.84-1.042l6.659-6.659m-2.97-2.97l2.97 2.97"
            />
            <path
              stroke-linecap="round"
              d="M19 13.5c0 3.288 0 4.931-.908 6.038a4 4 0 0 1-.554.554C16.43 21 14.788 21 11.5 21H11c-3.771 0-5.657 0-6.828-1.172S3 16.771 3 13v-.5c0-3.287 0-4.931.908-6.038q.25-.304.554-.554C5.57 5 7.212 5 10.5 5"
            />
          </g>
        </svg>
      </button>

      <!-- Archive Button -->
      <button
        (click)="archiveNotes(note)"
        class="p-2 rounded-full text-muted-foreground hover:bg-cyan-500 hover:text-white transition-all duration-200 cursor-pointer"
        aria-label="Archive note"
      >
        @if (note.status === 'active') {

        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
        >
          <path
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M20 8v7c0 2.828 0 4.243-.879 5.121C18.243 21 16.828 21 14 21h-4c-2.828 0-4.243 0-5.121-.879C4 19.243 4 17.828 4 15V8m15.5-5h-15c-.935 0-1.402 0-1.75.201a1.5 1.5 0 0 0-.549.549C2 4.098 2 4.565 2 5.5s0 1.402.201 1.75a1.5 1.5 0 0 0 .549.549C3.098 8 3.565 8 4.5 8h15c.935 0 1.402 0 1.75-.201a1.5 1.5 0 0 0 .549-.549C22 6.902 22 6.435 22 5.5s0-1.402-.201-1.75a1.5 1.5 0 0 0-.549-.549C20.902 3 20.435 3 19.5 3M10 11h4"
          />
        </svg>
        }@else {
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
        >
          <g
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
          >
            <path
              d="M21 7H3v6c0 3.771 0 5.657 1.172 6.828S7.229 21 11 21h2c3.771 0 5.657 0 6.828-1.172S21 16.771 21 13zm0 0H3l1.2-1.6c.883-1.178 1.325-1.767 1.958-2.083C6.792 3 7.528 3 9 3h6c1.472 0 2.208 0 2.842.317c.633.316 1.075.905 1.958 2.083z"
            />
            <path d="M12 11v6.5m-3-4c.59-.607 2.16-3 3-3s2.41 2.393 3 3" />
          </g>
        </svg>
        }
      </button>

      <!-- Delete Button -->
      <button
        (click)="onDeleteNote(note.id)"
        class="p-2 rounded-full text-muted-foreground hover:bg-red-500 hover:text-white transition-all duration-200 cursor-pointer"
        aria-label="Delete note"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
        >
          <path
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-width="2"
            d="m19.5 5.5l-.62 10.025c-.158 2.561-.237 3.842-.88 4.763a4 4 0 0 1-1.2 1.128c-.957.584-2.24.584-4.806.584c-2.57 0-3.855 0-4.814-.585a4 4 0 0 1-1.2-1.13c-.642-.922-.72-2.205-.874-4.77L4.5 5.5M3 5.5h18m-4.944 0l-.683-1.408c-.453-.936-.68-1.403-1.071-1.695a2 2 0 0 0-.275-.172C13.594 2 13.074 2 12.035 2c-1.066 0-1.599 0-2.04.234a2 2 0 0 0-.278.18c-.395.303-.616.788-1.058 1.757L8.053 5.5m1.447 11v-6m5 6v-6"
          />
        </svg>
      </button>
    </div>

    <!-- Note Title -->
    <h3 class="text-lg font-bold text-foreground mb-2 line-clamp-1 pr-20">
      {{ note.title }}
    </h3>

    <!-- Note Description -->
    <p class="text-sm text-muted-foreground mb-3 line-clamp-2">
      {{ note.description }}
    </p>

    <!-- Categories -->
    @if (note.categories && note.categories.length > 0) {
    <div class="flex flex-wrap gap-2 mb-3">
      @for (category of note.categories; track category.id) {
      <span
        [class]="getCategoryColor(category.name)"
        class="inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium text-white"
      >
        {{ category.name }}
      </span>
      }
    </div>
    }

    <!-- Date -->
    <p class="text-xs text-muted-foreground">
      {{ note.createdAt | date: 'MMMM d, y' }}
    </p>
  </div>
  }
</div>
}
